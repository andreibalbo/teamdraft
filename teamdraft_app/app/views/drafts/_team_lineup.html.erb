<div class="team-section">
  <span class="subsection-title"><%= title %></span>
  <div class="team-stats small text-muted mb-2">
    <span>ATK: <%= stats[:attack] %></span> |
    <span>DEF: <%= stats[:defense] %></span> |
    <span>STA: <%= stats[:stamina] %></span> |
    <span>POS: <%= stats[:positioning] %></span>
  </div>
  <div class="flex flex-col lg:flex-row gap-6 w-full">
    <table class="table flex-1 overflow-y-auto">
      <thead>
        <tr>
          <th>Name</th>
          <th>POS</th>
          <th>ATK</th>
          <th>DEF</th>
          <th>STA</th>
        </tr>
      </thead>
      <tbody>
        <% players.each do |player| %>
          <tr>
            <td><%= player.name %></td>
            <td><%= "#{player.positioning} (#{player.slim_position})" %></td>
            <td><%= player.attack %></td>
            <td><%= player.defense %></td>
            <td><%= player.stamina %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
    <div class="min-w-[300px] min-h-[300px]">
      <div class="relative lg:h-full h-[400px] soccer-court overflow-hidden">
        <%= render 'soccer_court' %>
        <% defensive, midfield, attacking = line_up[:formation] %>
        <%# goalkeeper %>
        <div class="absolute bottom-[18px] w-full flex justify-around">
          <div class="player-dot">
            <span class="text-xs text-wrap">GK</span>
          </div>
        </div>
        <%# Defensive players row %>
        <div class="absolute bottom-[30%] w-full flex justify-around">
          <% defensive.each do |player| %>
            <div class="player-dot defense">
              <span class="text-xs text-wrap"><%= player.name %></span>
            </div>
          <% end %>
        </div>
        <%# Midfield players row %>
        <div class="absolute bottom-[55%] w-full flex justify-around">
          <% midfield.each do |player| %>
            <div class="player-dot midfield">
              <span class="text-xs text-wrap"><%= player.name %></span>
            </div>
          <% end %>
        </div>
        <%# Attacking players row %>
        <div class="absolute bottom-[80%] w-full flex justify-around">
          <% attacking.each do |player| %>
            <div class="player-dot attack">
              <span class="text-xs text-wrap"><%= player.name %></span>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>